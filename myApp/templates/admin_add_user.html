{% extends "layout.html" %}
{% block title %}Add User{% endblock %}

{% block content %}
<div class="container py-5" style="max-width: 600px; min-height: 80vh;">
    <h2 class="mb-4">Add New User</h2>
    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="mb-3">
            {{ form.first_name.label }} {{ form.first_name(class="form-control") }}
        </div>
        <div class="mb-3">
            {{ form.last_name.label }} {{ form.last_name(class="form-control") }}
        </div>
        <div class="mb-3">
            {{ form.phone.label }} {{ form.phone(class="form-control") }}
        </div>
        <div class="mb-3">
            {{ form.role.label }} {{ form.role(class="form-select") }}
        </div>
        <div class="mb-3">
            {{ form.date_joined.label }} {{ form.date_joined(class="form-control") }}
        </div>
        <div class="mb-3">
            {{ form.base_salary.label }} {{ form.base_salary(type="number", step="0.1", min="1.0", class="form-control") }}
        </div>
        <button type="submit" class="btn btn-primary">{{ form.submit.label }}</button>
    </form>
</div>

<div class="container mt-5">
    <h2 class="mb-4">All Users</h2>
    <table class="table table-striped table-bordered">
        <thead class="table-light">
            <tr>
                <th>#</th>
                <th>Profile</th>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Role</th>
                <th>Base Salary</th>
                <th>Date Joined</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>
                    <img src="{{ url_for('static', filename=user.image_file) }}" alt="Avatar"
                         style="width: 40px; height: 40px; border-radius: 50%;">
                </td>
                <td>{{ user.first_name }} {{ user.last_name }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.phone or 'â€”' }}</td>
                <td>{{ user.role }}</td>
                <td>${{ user.base_salary }}</td>
                <td>{{ user.date_joined.strftime('%Y-%m-%d') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
