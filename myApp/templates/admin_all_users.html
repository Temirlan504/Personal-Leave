{% extends "layout.html" %}
{% block title %}All Users{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">All Users</h2>
    <table class="table table-striped table-bordered">
        <thead class="table-light">
            <tr>
                <th>#</th>
                <th>Profile</th>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Role</th>
                <th>Base Salary</th>
                <th>Date Joined</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users.items %}
            <tr>
                <td>{{ loop.index + (users.page - 1) * users.per_page }}</td>
                <td>
                    <img src="{{ url_for('static', filename=user.image_file) }}" alt="Profile pic"
                         style="width: 40px; height: 40px; border-radius: 50%;">
                </td>
                <td>
                    <a href="{{ url_for('admin.user_detail', user_id=user.id) }}">
                        {{ user.first_name }} {{ user.last_name }}
                    </a>
                </td>
                <td>{{ user.email }}</td>
                <td>{{ user.phone or 'â€”' }}</td>
                <td>{{ user.role }}</td>
                <td>${{ "{:,.2f}".format(user.base_salary) }}</td>
                <td>{{ user.date_joined.strftime('%b %d, %Y') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <nav aria-label="User pagination">
    <ul class="pagination justify-content-center mt-4">
        <li class="page-item {% if not users.has_prev %}disabled{% endif %}">
            <a class="page-link" href="{{ url_for('admin.all_users', page=users.prev_num) }}">Previous</a>
        </li>
        <li class="page-item disabled">
            <span class="page-link">Page {{ users.page }} of {{ users.pages }}</span>
        </li>
        <li class="page-item {% if not users.has_next %}disabled{% endif %}">
            <a class="page-link" href="{{ url_for('admin.all_users', page=users.next_num) }}">Next</a>
        </li>
    </ul>
    </nav>

</div>
</div>
{% endblock %}