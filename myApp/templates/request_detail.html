{% extends "layout.html" %}
{% block content %}
<div class="container mt-4">
    <h2>{{ req.type }} Request</h2>
    <p><strong>Employee:</strong> {{ req.user.first_name }} {{ req.user.last_name }}</p>
    <p><strong>From:</strong> {{ req.start_date.strftime('%b %d, %Y') }}</p>
    <p><strong>To:</strong> {{ req.end_date.strftime('%b %d, %Y') }}</p>
    <p><strong>Status:</strong> {{ req.status|capitalize }}</p>
    <p><strong>Pay requested:</strong> {{ 'Yes' if req.is_paid else 'No' }}</p>
    <p><strong>Admin Approved:</strong> {{ "Yes" if req.admin_approved else "No" }}</p>
    <p><strong>HR Approved:</strong> {{ "Yes" if req.hr_approved else "No" }}</p>


    <form method="POST" id="approvalForm">
        {% if req.status == 'pending' %}
            {% if current_user.role == 'admin' and not req.admin_approved %}
                <button name="action" value="approve_admin" class="btn btn-success">Approve as Admin</button>
                <button name="action" value="decline" class="btn btn-danger">Decline</button>
            {% elif current_user.role == 'hr' and not req.hr_approved %}
                <button name="action" value="approve_hr" class="btn btn-success">Approve as HR</button>
                <button name="action" value="decline" class="btn btn-danger">Decline</button>
            {% endif %}
        {% else %}
            <p class="text-muted">No actions available. This request has already been {{ req.status }}.</p>
        {% endif %}
    </form>
</div>
{% endblock %}